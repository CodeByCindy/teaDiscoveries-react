{"ast":null,"code":"import{createSlice,createAsyncThunk}from'@reduxjs/toolkit';// import { PROMOTIONS } from '../../app/shared/PROMOTIONS';\nimport{baseUrl}from'../../app/shared/baseUrl';import{mapImageURL}from'../../utils/mapImageURL';export const fetchPromotions=createAsyncThunk('promotions/fetchPromotions',async()=>{const response=await fetch(baseUrl+'promotions');if(!response.ok){return Promise.reject('Unable to fetch, status: '+response.status);}const data=await response.json();return data;});const initialState={promotionsArray:[],isLoading:true,errMsg:''};const promotionsSlice=createSlice({name:'promotions',initialState,reducers:{},extraReducers:{[fetchPromotions.pending]:state=>{state.isLoading=true;},[fetchPromotions.fulfilled]:(state,action)=>{state.isLoading=false;state.errMsg='';state.promotionsArray=mapImageURL(action.payload);},[fetchPromotions.rejected]:(state,action)=>{state.isLoading=false;state.errMsg=action.error?action.error.message:'Fetch failed';}}});export const promotionsReducer=promotionsSlice.reducer;export const selectFeaturedPromotion=state=>{return{featuredItem:state.promotions.promotionsArray.find(promotion=>promotion.featured),isLoading:state.promotions.isLoading,errMsg:state.promotions.errMsg};};","map":{"version":3,"names":["createSlice","createAsyncThunk","baseUrl","mapImageURL","fetchPromotions","response","fetch","ok","Promise","reject","status","data","json","initialState","promotionsArray","isLoading","errMsg","promotionsSlice","name","reducers","extraReducers","pending","state","fulfilled","action","payload","rejected","error","message","promotionsReducer","reducer","selectFeaturedPromotion","featuredItem","promotions","find","promotion","featured"],"sources":["/Users/kennethhu/Desktop/NucampFolder/WebDev/3-React/nucampsite/src/features/promotions/promotionsSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\n// import { PROMOTIONS } from '../../app/shared/PROMOTIONS';\nimport { baseUrl } from '../../app/shared/baseUrl';\nimport { mapImageURL} from '../../utils/mapImageURL';\n\nexport const fetchPromotions = createAsyncThunk (\n    'promotions/fetchPromotions', \n    async () =>{\n        const response = await fetch(baseUrl + 'promotions');\n        if(!response.ok){\n            return Promise.reject('Unable to fetch, status: ' + response.status);\n        }\n        const data = await response.json();\n        return data;\n    }\n)\n\nconst initialState = {\n    promotionsArray: [],\n    isLoading: true,\n    errMsg: ''\n};\n\nconst promotionsSlice = createSlice({\n    name: 'promotions',\n    initialState,\n    reducers: {},\n    extraReducers: {\n        [fetchPromotions.pending]: (state) => {\n            state.isLoading = true;\n        },\n        [fetchPromotions.fulfilled]: (state, action) => {\n            state.isLoading = false;\n            state.errMsg = '';\n            state.promotionsArray = mapImageURL(action.payload);\n        },\n        [fetchPromotions.rejected]: (state, action) => {   \n            state.isLoading = false;\n            state.errMsg = action.error? action.error.message : 'Fetch failed';\n        }\n    }\n});\n\nexport const promotionsReducer = promotionsSlice.reducer;\n\nexport const selectFeaturedPromotion = (state) => {\n    return {\n        featuredItem: state.promotions.promotionsArray.find(\n            (promotion) => promotion.featured),\n        isLoading: state.promotions.isLoading,\n        errMsg: state.promotions.errMsg\n    };\n};"],"mappings":"AAAA,OAASA,WAAW,CAAEC,gBAAgB,KAAQ,kBAAkB,CAChE;AACA,OAASC,OAAO,KAAQ,0BAA0B,CAClD,OAASC,WAAW,KAAO,yBAAyB,CAEpD,MAAO,MAAM,CAAAC,eAAe,CAAGH,gBAAgB,CAC3C,4BAA4B,CAC5B,SAAW,CACP,KAAM,CAAAI,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAACJ,OAAO,CAAG,YAAY,CAAC,CACpD,GAAG,CAACG,QAAQ,CAACE,EAAE,CAAC,CACZ,MAAO,CAAAC,OAAO,CAACC,MAAM,CAAC,2BAA2B,CAAGJ,QAAQ,CAACK,MAAM,CAAC,CACxE,CACA,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAN,QAAQ,CAACO,IAAI,CAAC,CAAC,CAClC,MAAO,CAAAD,IAAI,CACf,CACJ,CAAC,CAED,KAAM,CAAAE,YAAY,CAAG,CACjBC,eAAe,CAAE,EAAE,CACnBC,SAAS,CAAE,IAAI,CACfC,MAAM,CAAE,EACZ,CAAC,CAED,KAAM,CAAAC,eAAe,CAAGjB,WAAW,CAAC,CAChCkB,IAAI,CAAE,YAAY,CAClBL,YAAY,CACZM,QAAQ,CAAE,CAAC,CAAC,CACZC,aAAa,CAAE,CACX,CAAChB,eAAe,CAACiB,OAAO,EAAIC,KAAK,EAAK,CAClCA,KAAK,CAACP,SAAS,CAAG,IAAI,CAC1B,CAAC,CACD,CAACX,eAAe,CAACmB,SAAS,EAAG,CAACD,KAAK,CAAEE,MAAM,GAAK,CAC5CF,KAAK,CAACP,SAAS,CAAG,KAAK,CACvBO,KAAK,CAACN,MAAM,CAAG,EAAE,CACjBM,KAAK,CAACR,eAAe,CAAGX,WAAW,CAACqB,MAAM,CAACC,OAAO,CAAC,CACvD,CAAC,CACD,CAACrB,eAAe,CAACsB,QAAQ,EAAG,CAACJ,KAAK,CAAEE,MAAM,GAAK,CAC3CF,KAAK,CAACP,SAAS,CAAG,KAAK,CACvBO,KAAK,CAACN,MAAM,CAAGQ,MAAM,CAACG,KAAK,CAAEH,MAAM,CAACG,KAAK,CAACC,OAAO,CAAG,cAAc,CACtE,CACJ,CACJ,CAAC,CAAC,CAEF,MAAO,MAAM,CAAAC,iBAAiB,CAAGZ,eAAe,CAACa,OAAO,CAExD,MAAO,MAAM,CAAAC,uBAAuB,CAAIT,KAAK,EAAK,CAC9C,MAAO,CACHU,YAAY,CAAEV,KAAK,CAACW,UAAU,CAACnB,eAAe,CAACoB,IAAI,CAC9CC,SAAS,EAAKA,SAAS,CAACC,QAAQ,CAAC,CACtCrB,SAAS,CAAEO,KAAK,CAACW,UAAU,CAAClB,SAAS,CACrCC,MAAM,CAAEM,KAAK,CAACW,UAAU,CAACjB,MAC7B,CAAC,CACL,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}